(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const t=function(e){var t=e.duration,n=e.draw,r=e.timing,o=performance.now();requestAnimationFrame((function e(a){var c=(a-o)/t;c>1&&(c=1);var u=r(c);n(u),c<1&&requestAnimationFrame(e)}))};function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,c=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw c}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o,a,c,u,l,i,s,d,m,v,f,g,p,y;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds"),o=document.querySelector("#timer-days"),a=document.querySelectorAll(".timer-numbers");function c(){function e(e){return(parseInt(e,10)<10&&parseInt(e,10)>=0?"0":"")+e}var c,u,l,i=(c=(new Date("10 may 2021").getTime()-(new Date).getTime())/1e3,u=Math.floor(c%60),l=Math.floor(c/60%60),{timeRemaining:c,hours:Math.floor(c/3600%24),minutes:l,seconds:u,days:Math.floor(c/3600/24)});i.timeRemaining<0?(a.forEach((function(e){return e.style.color="red"})),t.textContent="00",n.textContent="00",r.textContent="00",o.textContent="0"):(t.textContent=e(i.hours),n.textContent=e(i.minutes),r.textContent=e(i.seconds),o.textContent=i.days)}c(),setInterval(c,1e3)})(),f=document.querySelector("menu"),g=document.querySelector(".close-btn"),p=document.querySelector("body"),y=function(t){if(Array.isArray(t))return e(t)}(v=f.querySelectorAll("ul > li > a"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(v)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p.addEventListener("click",(function(e){(e.target.closest(".menu")||e.target===g||y.find((function(t){return t===e.target}))||f.matches(".active-menu")&&!e.target.closest("menu"))&&f.classList.toggle("active-menu")})),i=document.querySelector(".popup"),s=document.querySelectorAll(".popup-btn"),d=document.querySelector(".popup-close"),m=document.querySelector(".popup .popup-content"),s.forEach((function(e){return e.addEventListener("click",(function(){document.documentElement.clientWidth>768?t({duration:300,timing:function(e){return e},draw:function(e){i.style.display="block",m.style.top=100-90*e+"%"}}):i.style.display="block"}))})),i.addEventListener("click",(function(e){e.target!==i&&e.target!==d||(i.style.display="none")})),function(){var e=document.querySelector('[href="#service-block"]'),n=document.querySelector("main").getBoundingClientRect().height,r=document.querySelector("menu").querySelectorAll("ul > li > a"),o=[];r.forEach((function(e,n){var r=e.getAttribute("href"),a=document.querySelector("".concat(r)).getBoundingClientRect().height;o.push(a);var c=o.reduce((function(e,t){return e+t}),0);e.addEventListener("click",(function(e){e.preventDefault(),t({duration:500,timing:function(e){return e},draw:function(e){0===document.documentElement.scrollTop?document.documentElement.scrollTop=e*(c-a):window.scrollBy(0,e*(c-a-document.documentElement.scrollTop))}})}))})),e.addEventListener("click",(function(e){e.preventDefault(),t({duration:500,timing:function(e){return e},draw:function(e){0===document.documentElement.scrollTop?document.documentElement.scrollTop=e*n:window.scrollBy(0,e*(n-document.documentElement.scrollTop))}})}))}(),c=document.querySelector(".service-header"),u=c.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab"),c.addEventListener("click",(function(e){var t=e.target.closest(".service-header-tab");t&&u.forEach((function(e,n){e===t&&function(e){for(var t=0;t<l.length;t++)e===t?(u[t].classList.add("active"),l[t].classList.remove("d-none")):(u[t].classList.remove("active"),l[t].classList.add("d-none"))}(n)}))})),function(){for(var e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots"),r=0;r<t.length;r++){var o=document.createElement("li");o.className="dot",0===r?(o.classList.add("dot-active"),n.append(o)):n.append(o)}var a,c=document.querySelectorAll(".dot"),u=0,l=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},s=function(){l(t,u,"portfolio-item-active"),l(c,u,"dot-active"),++u>=t.length&&(u=0),i(t,u,"portfolio-item-active"),i(c,u,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;a=setInterval(s,e)};e.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(l(t,u,"portfolio-item-active"),l(c,u,"dot-active"),n.matches("#arrow-right")?u++:n.matches("#arrow-left")?u--:n.matches(".dot")&&c.forEach((function(e,t){e===n&&(u=t)})),u>=t.length&&(u=0),u<0&&(u=t.length-1),i(t,u,"portfolio-item-active"),i(c,u,"dot-active"))})),e.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(a)})),e.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&d()})),d(4e3)}(),document.querySelectorAll(".command__photo").forEach((function(e){var t=e.src;e.addEventListener("mouseover",(function(){return e.src=e.dataset.img})),e.addEventListener("mouseout",(function(){return e.src=t}))})),function(){var e=document.querySelector("body"),t=document.querySelectorAll(".footer-form-input > .row > div > input, .main-form-input > .row > div > input");function r(e){if("user_name"===e.target.name)e.target.value.length<3?e.target.setCustomValidity("Имя не может быть короче 3 букв"):e.target.setCustomValidity(""),e.target.value=e.target.value.replace(/[^а-яА-Я\s]/g,"");else if("user_message"===e.target.name)e.target.value=e.target.value.replace(/[^а-яА-Я0-9.,!?;:'" ]/g,"");else if("email"===e.target.type){var t=e.target.value;e.target.value="",e.target.value=t,e.target.value=e.target.value.replace(/[^a-zA-Z0-9-@_.!~*']/g,""),e.target.value=e.target.value.replace(/-{2,}/,"-"),e.target.value=e.target.value.replace(/\.{2,}/,".")}else"number"===e.target.type?e.target.value=e.target.value.replace(/\D/gi,""):"tel"===e.target.type&&(e.target.value.length<18?e.target.setCustomValidity("Не полный номер телефона"):e.target.setCustomValidity(""))}!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",r=document.querySelectorAll(e);function o(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),a=this.value.replace(/\D/g,""),c=0,u=r.replace(/[_\d]/g,(function(e){return c<a.length?a.charAt(c++)||o.charAt(c):e}));-1!=(c=u.indexOf("_"))&&(u=u.slice(0,c));var l=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=u),"blur"==e.type&&this.value.length<5&&(this.value="")}var a,c=n(r);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.addEventListener("input",o),u.addEventListener("focus",o),u.addEventListener("blur",o)}}catch(e){c.e(e)}finally{c.f()}}(".form-phone"),e.addEventListener("input",(function(e){return r(e)})),t.forEach((function(e){return e.addEventListener("blur",(function(e){r(e),"email"!==e.target.type?(e.target.value=e.target.value.trim(),""!==e.target.value&&(e.target.value=e.target.value.replace(/\s{2,}/," "),e.target.value=e.target.value[0].toUpperCase()+e.target.value.slice(1).toLowerCase())):(e.target.value=e.target.value.replace(/(^-|-$)/g,""),e.target.value=e.target.value.replace(/^\./g,""))}))}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),u=document.querySelector("#total"),l=function(){var n=0,l=1,i=1,s=r.options[r.selectedIndex].value,d=+o.value;a.value>1&&(l+=(a.value-1)/10),c.value&&c.value<5?i*=2:c.value&&c.value<10&&(i*=1.5),s&&d&&(n=e*s*d*l*i),t({duration:1e3,timing:function(e){return e},draw:function(e){u.textContent=Math.floor(e*n)}})};n.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l()}))}(),o=document.querySelectorAll("form"),a=document.createElement("div"),o.forEach((function(e){return e.addEventListener("submit",(function(t){t.preventDefault(),a.innerHTML='\n        <div class="spinner">\n            <div class="rect1"></div>\n            <div class="rect2"></div>\n            <div class="rect3"></div>\n            <div class="rect4"></div>\n            <div class="rect5"></div>\n        </div>\n        ',e.appendChild(a);var n=new FormData(e),r={};n.forEach((function(e,t){r[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(r).then((function(t){if(200!==t.status)throw new Error("Все пропало!");a.style.cssText="font-size: 2rem; color: #fff",a.innerHTML="Спасибо! Мы скоро свяжемся с вами!",e.querySelectorAll("input").forEach((function(e){return e.value=""}))})).catch((function(e){a.innerHTML="Что то пошло не так",console.log(e)}))}))}))})();